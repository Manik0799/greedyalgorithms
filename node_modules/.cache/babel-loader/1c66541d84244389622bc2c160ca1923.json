{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _raphael = require('raphael');\n\nvar _raphael2 = _interopRequireDefault(_raphael);\n\nvar _renderer = require('./renderer');\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // Is not bundled for the standalone browser version (e.g. for CDN)\n\n\nvar Raphael = typeof window !== 'undefined' && window.Raphael || _raphael2.default;\n\nvar dragify = function dragify(shape) {\n  var r = shape.paper;\n  shape.items.forEach(function (item) {\n    item.set = shape;\n\n    if (item.type === 'text') {\n      return;\n    }\n\n    item.node.style.cursor = 'move';\n    item.drag(function dragMove(dx, dy, x, y) {\n      dx = this.set.ox;\n      dy = this.set.oy;\n      var bBox = this.set.getBBox();\n      var newX = x - dx + (bBox.x + bBox.width / 2);\n      var newY = y - dy + (bBox.y + bBox.height / 2);\n      var clientX = x - (newX < 20 ? newX - 20 : newX > r.width - 20 ? newX - r.width + 20 : 0);\n      var clientY = y - (newY < 20 ? newY - 20 : newY > r.height - 20 ? newY - r.height + 20 : 0);\n      this.set.translate(clientX - Math.round(dx), clientY - Math.round(dy));\n      shape.connections.forEach(function (connection) {\n        connection.draw();\n      });\n      this.set.ox = clientX;\n      this.set.oy = clientY;\n    }, function dragEnter(x, y) {\n      this.set.ox = x;\n      this.set.oy = y;\n      this.animate({\n        'fill-opacity': 0.2\n      }, 500);\n    }, function dragOut() {\n      this.animate({\n        'fill-opacity': 0.0\n      }, 500);\n    });\n  });\n};\n\nvar RaphaelRenderer = function (_Renderer) {\n  _inherits(RaphaelRenderer, _Renderer);\n\n  function RaphaelRenderer(element, graph, width, height) {\n    _classCallCheck(this, RaphaelRenderer);\n\n    var _this = _possibleConstructorReturn(this, (RaphaelRenderer.__proto__ || Object.getPrototypeOf(RaphaelRenderer)).call(this, element, graph, width, height));\n\n    _this.canvas = Raphael(_this.element, _this.width, _this.height);\n    _this.lineStyle = {\n      stroke: '#443399',\n      'stroke-width': '2px'\n    };\n    return _this;\n  }\n\n  _createClass(RaphaelRenderer, [{\n    key: 'drawNode',\n    value: function drawNode(node) {\n      var color = Raphael.getColor(); // TODO update / cache shape\n      // if (node.shape) {\n      //   node.shape.translate(node.point[0], node.point[1])\n      //   return\n      // }\n\n      if (node.render) {\n        node.shape = node.render(this.canvas, node);\n      } else {\n        node.shape = this.canvas.set();\n        node.shape.push(this.canvas.ellipse(0, 0, 30, 20).attr({\n          stroke: color,\n          'stroke-width': 2,\n          fill: color,\n          'fill-opacity': 0\n        })).push(this.canvas.text(0, 30, node.label || node.id));\n      }\n\n      node.shape.translate(node.point[0], node.point[1]);\n      node.shape.connections = [];\n      dragify(node.shape);\n    }\n  }, {\n    key: 'drawEdge',\n    value: function drawEdge(edge) {\n      if (!edge.shape) {\n        edge.shape = this.canvas.connection(edge.source.shape, edge.target.shape, edge.style); // edge.shape.line.attr(this.lineStyle)\n\n        edge.source.shape.connections.push(edge.shape);\n        edge.target.shape.connections.push(edge.shape);\n      }\n    }\n  }]);\n\n  return RaphaelRenderer;\n}(_renderer2.default); // <Raphael.fn.connection>\n\n/* coordinates for potential connection coordinates from/to the objects */\n\n\nexports.default = RaphaelRenderer;\n\nvar getConnectionPoints = function getConnectionPoints(obj1, obj2) {\n  /* get bounding boxes of target and source */\n  var bb1 = obj1.getBBox();\n  var bb2 = obj2.getBBox();\n  var off1 = 0;\n  var off2 = 0;\n  return [\n  /* NORTH 1 */\n  {\n    x: bb1.x + bb1.width / 2,\n    y: bb1.y - off1\n  },\n  /* SOUTH 1 */\n  {\n    x: bb1.x + bb1.width / 2,\n    y: bb1.y + bb1.height + off1\n  },\n  /* WEST  1 */\n  {\n    x: bb1.x - off1,\n    y: bb1.y + bb1.height / 2\n  },\n  /* EAST  1 */\n  {\n    x: bb1.x + bb1.width + off1,\n    y: bb1.y + bb1.height / 2\n  },\n  /* NORTH 2 */\n  {\n    x: bb2.x + bb2.width / 2,\n    y: bb2.y - off2\n  },\n  /* SOUTH 2 */\n  {\n    x: bb2.x + bb2.width / 2,\n    y: bb2.y + bb2.height + off2\n  },\n  /* WEST  2 */\n  {\n    x: bb2.x - off2,\n    y: bb2.y + bb2.height / 2\n  },\n  /* EAST  2 */\n  {\n    x: bb2.x + bb2.width + off2,\n    y: bb2.y + bb2.height / 2\n  }];\n};\n\nRaphael.fn.connection = function Connection(obj1, obj2, style) {\n  var self = this;\n  /* create and return new connection */\n\n  var edge = {\n    /* eslint-disable complexity */\n    draw: function draw() {\n      var p = getConnectionPoints(obj1, obj2);\n      /* distances between objects and according coordinates connection */\n\n      var d = {};\n      var dis = [];\n      var dx = void 0;\n      var dy = void 0;\n      /*\n       * find out the best connection coordinates by trying all possible ways\n       */\n\n      /* loop the first object's connection coordinates */\n\n      for (var i = 0; i < 4; i++) {\n        /* loop the second object's connection coordinates */\n        for (var j = 4; j < 8; j++) {\n          dx = Math.abs(p[i].x - p[j].x);\n          dy = Math.abs(p[i].y - p[j].y);\n\n          if (i === j - 4 || (i !== 3 && j !== 6 || p[i].x < p[j].x) && (i !== 2 && j !== 7 || p[i].x > p[j].x) && (i !== 0 && j !== 5 || p[i].y > p[j].y) && (i !== 1 && j !== 4 || p[i].y < p[j].y)) {\n            dis.push(dx + dy);\n            d[dis[dis.length - 1].toFixed(3)] = [i, j];\n          }\n        }\n      }\n\n      var res = dis.length === 0 ? [0, 4] : d[Math.min.apply(Math, dis).toFixed(3)];\n      /* bezier path */\n\n      var x1 = p[res[0]].x;\n      var y1 = p[res[0]].y;\n      var x4 = p[res[1]].x;\n      var y4 = p[res[1]].y;\n      dx = Math.max(Math.abs(x1 - x4) / 2, 10);\n      dy = Math.max(Math.abs(y1 - y4) / 2, 10);\n      var x2 = [x1, x1, x1 - dx, x1 + dx][res[0]].toFixed(3);\n      var y2 = [y1 - dy, y1 + dy, y1, y1][res[0]].toFixed(3);\n      var x3 = [0, 0, 0, 0, x4, x4, x4 - dx, x4 + dx][res[1]].toFixed(3);\n      var y3 = [0, 0, 0, 0, y1 + dy, y1 - dy, y4, y4][res[1]].toFixed(3);\n      /* assemble path and arrow */\n\n      var path = ['M' + x1.toFixed(3), y1.toFixed(3), 'C' + x2, y2, x3, y3, x4.toFixed(3), y4.toFixed(3)].join(',');\n      /* arrow */\n\n      if (style && style.directed) {\n        // magnitude, length of the last path vector\n        var mag = Math.sqrt((y4 - y3) * (y4 - y3) + (x4 - x3) * (x4 - x3)); // vector normalisation to specified length\n\n        var norm = function norm(x, l) {\n          return -x * (l || 5) / mag;\n        }; // calculate array coordinates (two lines orthogonal to the path vector)\n\n\n        var arc = [{\n          x: (norm(x4 - x3) + norm(y4 - y3) + x4).toFixed(3),\n          y: (norm(y4 - y3) + norm(x4 - x3) + y4).toFixed(3)\n        }, {\n          x: (norm(x4 - x3) - norm(y4 - y3) + x4).toFixed(3),\n          y: (norm(y4 - y3) - norm(x4 - x3) + y4).toFixed(3)\n        }];\n        path = path + ',M' + arc[0].x + ',' + arc[0].y + ',L' + x4 + ',' + y4 + ',L' + arc[1].x + ',' + arc[1].y;\n      }\n      /* function to be used for moving existent path(s), e.g. animate() or attr() */\n\n\n      var move = 'attr';\n      /* applying path(s) */\n\n      if (edge.fg) {\n        edge.fg[move]({\n          path: path\n        });\n      } else {\n        edge.fg = self.path(path).attr({\n          stroke: style && style.stroke || '#000',\n          fill: 'none'\n        }).toBack();\n      }\n\n      if (edge.bg) {\n        edge.bg[move]({\n          path: path\n        });\n      } else if (style && style.fill && style.fill.split) {\n        edge.bg = self.path(path).attr({\n          stroke: style.fill.split('|')[0],\n          fill: 'none',\n          'stroke-width': style.fill.split('|')[1] || 3\n        }).toBack();\n      }\n      /* setting label */\n\n\n      if (style && style.label) {\n        if (edge.label) {\n          edge.label.attr({\n            x: (x1 + x4) / 2,\n            y: (y1 + y4) / 2\n          });\n        } else {\n          edge.label = self.text((x1 + x4) / 2, (y1 + y4) / 2, style.label).attr({\n            fill: '#000',\n            'font-size': style['font-size'] || '10px',\n            'fill-opacity': '0.6'\n          });\n        }\n      }\n\n      if (style && style.label && style['label-style'] && edge.label) {\n        edge.label.attr(style['label-style']);\n      }\n\n      if (style && style.callback) {\n        style.callback(edge);\n      }\n    }\n  };\n  edge.draw();\n  return edge;\n}; // </Raphael.fn.connection>","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/GreedyAssignment/assignment/node_modules/graphdracula/lib/renderer/raphael.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_raphael","require","_raphael2","_interopRequireDefault","_renderer","_renderer2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Raphael","window","dragify","shape","r","paper","items","forEach","item","set","type","node","style","cursor","drag","dragMove","dx","dy","x","y","ox","oy","bBox","getBBox","newX","width","newY","height","clientX","clientY","translate","Math","round","connections","connection","draw","dragEnter","animate","dragOut","RaphaelRenderer","_Renderer","element","graph","_this","getPrototypeOf","canvas","lineStyle","stroke","drawNode","color","getColor","render","push","ellipse","attr","fill","text","label","id","point","drawEdge","edge","source","getConnectionPoints","obj1","obj2","bb1","bb2","off1","off2","fn","Connection","p","d","dis","j","abs","toFixed","res","min","apply","x1","y1","x4","y4","max","x2","y2","x3","y3","path","join","directed","mag","sqrt","norm","l","arc","move","fg","toBack","bg","split","callback"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _raphael = require('raphael');\n\nvar _raphael2 = _interopRequireDefault(_raphael);\n\nvar _renderer = require('./renderer');\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Is not bundled for the standalone browser version (e.g. for CDN)\nvar Raphael = typeof window !== 'undefined' && window.Raphael || _raphael2.default;\n\nvar dragify = function dragify(shape) {\n  var r = shape.paper;\n  shape.items.forEach(function (item) {\n    item.set = shape;\n    if (item.type === 'text') {\n      return;\n    }\n    item.node.style.cursor = 'move';\n    item.drag(function dragMove(dx, dy, x, y) {\n      dx = this.set.ox;\n      dy = this.set.oy;\n      var bBox = this.set.getBBox();\n      var newX = x - dx + (bBox.x + bBox.width / 2);\n      var newY = y - dy + (bBox.y + bBox.height / 2);\n      var clientX = x - (newX < 20 ? newX - 20 : newX > r.width - 20 ? newX - r.width + 20 : 0);\n      var clientY = y - (newY < 20 ? newY - 20 : newY > r.height - 20 ? newY - r.height + 20 : 0);\n      this.set.translate(clientX - Math.round(dx), clientY - Math.round(dy));\n      shape.connections.forEach(function (connection) {\n        connection.draw();\n      });\n\n      this.set.ox = clientX;\n      this.set.oy = clientY;\n    }, function dragEnter(x, y) {\n      this.set.ox = x;\n      this.set.oy = y;\n      this.animate({ 'fill-opacity': 0.2 }, 500);\n    }, function dragOut() {\n      this.animate({ 'fill-opacity': 0.0 }, 500);\n    });\n  });\n};\n\nvar RaphaelRenderer = function (_Renderer) {\n  _inherits(RaphaelRenderer, _Renderer);\n\n  function RaphaelRenderer(element, graph, width, height) {\n    _classCallCheck(this, RaphaelRenderer);\n\n    var _this = _possibleConstructorReturn(this, (RaphaelRenderer.__proto__ || Object.getPrototypeOf(RaphaelRenderer)).call(this, element, graph, width, height));\n\n    _this.canvas = Raphael(_this.element, _this.width, _this.height);\n    _this.lineStyle = {\n      stroke: '#443399',\n      'stroke-width': '2px'\n    };\n    return _this;\n  }\n\n  _createClass(RaphaelRenderer, [{\n    key: 'drawNode',\n    value: function drawNode(node) {\n      var color = Raphael.getColor();\n      // TODO update / cache shape\n      // if (node.shape) {\n      //   node.shape.translate(node.point[0], node.point[1])\n      //   return\n      // }\n      if (node.render) {\n        node.shape = node.render(this.canvas, node);\n      } else {\n        node.shape = this.canvas.set();\n        node.shape.push(this.canvas.ellipse(0, 0, 30, 20).attr({ stroke: color, 'stroke-width': 2, fill: color, 'fill-opacity': 0 })).push(this.canvas.text(0, 30, node.label || node.id));\n      }\n      node.shape.translate(node.point[0], node.point[1]);\n      node.shape.connections = [];\n      dragify(node.shape);\n    }\n  }, {\n    key: 'drawEdge',\n    value: function drawEdge(edge) {\n      if (!edge.shape) {\n        edge.shape = this.canvas.connection(edge.source.shape, edge.target.shape, edge.style);\n        // edge.shape.line.attr(this.lineStyle)\n        edge.source.shape.connections.push(edge.shape);\n        edge.target.shape.connections.push(edge.shape);\n      }\n    }\n  }]);\n\n  return RaphaelRenderer;\n}(_renderer2.default);\n\n// <Raphael.fn.connection>\n\n/* coordinates for potential connection coordinates from/to the objects */\n\n\nexports.default = RaphaelRenderer;\nvar getConnectionPoints = function getConnectionPoints(obj1, obj2) {\n  /* get bounding boxes of target and source */\n  var bb1 = obj1.getBBox();\n  var bb2 = obj2.getBBox();\n\n  var off1 = 0;\n  var off2 = 0;\n\n  return [\n\n  /* NORTH 1 */\n  { x: bb1.x + bb1.width / 2, y: bb1.y - off1 },\n\n  /* SOUTH 1 */\n  { x: bb1.x + bb1.width / 2, y: bb1.y + bb1.height + off1 },\n\n  /* WEST  1 */\n  { x: bb1.x - off1, y: bb1.y + bb1.height / 2 },\n\n  /* EAST  1 */\n  { x: bb1.x + bb1.width + off1, y: bb1.y + bb1.height / 2 },\n\n  /* NORTH 2 */\n  { x: bb2.x + bb2.width / 2, y: bb2.y - off2 },\n\n  /* SOUTH 2 */\n  { x: bb2.x + bb2.width / 2, y: bb2.y + bb2.height + off2 },\n\n  /* WEST  2 */\n  { x: bb2.x - off2, y: bb2.y + bb2.height / 2 },\n\n  /* EAST  2 */\n  { x: bb2.x + bb2.width + off2, y: bb2.y + bb2.height / 2 }];\n};\n\nRaphael.fn.connection = function Connection(obj1, obj2, style) {\n  var self = this;\n\n  /* create and return new connection */\n  var edge = {\n\n    /* eslint-disable complexity */\n    draw: function draw() {\n      var p = getConnectionPoints(obj1, obj2);\n\n      /* distances between objects and according coordinates connection */\n      var d = {};\n      var dis = [];\n      var dx = void 0;\n      var dy = void 0;\n\n      /*\n       * find out the best connection coordinates by trying all possible ways\n       */\n      /* loop the first object's connection coordinates */\n      for (var i = 0; i < 4; i++) {\n        /* loop the second object's connection coordinates */\n        for (var j = 4; j < 8; j++) {\n          dx = Math.abs(p[i].x - p[j].x);\n          dy = Math.abs(p[i].y - p[j].y);\n          if (i === j - 4 || (i !== 3 && j !== 6 || p[i].x < p[j].x) && (i !== 2 && j !== 7 || p[i].x > p[j].x) && (i !== 0 && j !== 5 || p[i].y > p[j].y) && (i !== 1 && j !== 4 || p[i].y < p[j].y)) {\n            dis.push(dx + dy);\n            d[dis[dis.length - 1].toFixed(3)] = [i, j];\n          }\n        }\n      }\n      var res = dis.length === 0 ? [0, 4] : d[Math.min.apply(Math, dis).toFixed(3)];\n\n      /* bezier path */\n      var x1 = p[res[0]].x;\n      var y1 = p[res[0]].y;\n      var x4 = p[res[1]].x;\n      var y4 = p[res[1]].y;\n      dx = Math.max(Math.abs(x1 - x4) / 2, 10);\n      dy = Math.max(Math.abs(y1 - y4) / 2, 10);\n      var x2 = [x1, x1, x1 - dx, x1 + dx][res[0]].toFixed(3);\n      var y2 = [y1 - dy, y1 + dy, y1, y1][res[0]].toFixed(3);\n      var x3 = [0, 0, 0, 0, x4, x4, x4 - dx, x4 + dx][res[1]].toFixed(3);\n      var y3 = [0, 0, 0, 0, y1 + dy, y1 - dy, y4, y4][res[1]].toFixed(3);\n\n      /* assemble path and arrow */\n      var path = ['M' + x1.toFixed(3), y1.toFixed(3), 'C' + x2, y2, x3, y3, x4.toFixed(3), y4.toFixed(3)].join(',');\n\n      /* arrow */\n      if (style && style.directed) {\n        // magnitude, length of the last path vector\n        var mag = Math.sqrt((y4 - y3) * (y4 - y3) + (x4 - x3) * (x4 - x3));\n        // vector normalisation to specified length\n        var norm = function norm(x, l) {\n          return -x * (l || 5) / mag;\n        };\n        // calculate array coordinates (two lines orthogonal to the path vector)\n        var arc = [{\n          x: (norm(x4 - x3) + norm(y4 - y3) + x4).toFixed(3),\n          y: (norm(y4 - y3) + norm(x4 - x3) + y4).toFixed(3)\n        }, {\n          x: (norm(x4 - x3) - norm(y4 - y3) + x4).toFixed(3),\n          y: (norm(y4 - y3) - norm(x4 - x3) + y4).toFixed(3)\n        }];\n        path = path + ',M' + arc[0].x + ',' + arc[0].y + ',L' + x4 + ',' + y4 + ',L' + arc[1].x + ',' + arc[1].y;\n      }\n\n      /* function to be used for moving existent path(s), e.g. animate() or attr() */\n      var move = 'attr';\n\n      /* applying path(s) */\n      if (edge.fg) {\n        edge.fg[move]({ path: path });\n      } else {\n        edge.fg = self.path(path).attr({ stroke: style && style.stroke || '#000', fill: 'none' }).toBack();\n      }\n      if (edge.bg) {\n        edge.bg[move]({ path: path });\n      } else if (style && style.fill && style.fill.split) {\n        edge.bg = self.path(path).attr({\n          stroke: style.fill.split('|')[0],\n          fill: 'none',\n          'stroke-width': style.fill.split('|')[1] || 3\n        }).toBack();\n      }\n\n      /* setting label */\n      if (style && style.label) {\n        if (edge.label) {\n          edge.label.attr({ x: (x1 + x4) / 2, y: (y1 + y4) / 2 });\n        } else {\n          edge.label = self.text((x1 + x4) / 2, (y1 + y4) / 2, style.label).attr({\n            fill: '#000',\n            'font-size': style['font-size'] || '10px',\n            'fill-opacity': '0.6'\n          });\n        }\n      }\n\n      if (style && style.label && style['label-style'] && edge.label) {\n        edge.label.attr(style['label-style']);\n      }\n\n      if (style && style.callback) {\n        style.callback(edge);\n      }\n    }\n  };\n  edge.draw();\n  return edge;\n};\n\n// </Raphael.fn.connection>"]},"metadata":{},"sourceType":"script"}